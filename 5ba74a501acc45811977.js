(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{233:function(t,e,o){var r;window,r=function(t,e,o,r){return function(t){var e={};function o(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=e,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/assets/vendor/",o(o.s=8)}([function(t,e,o){var r=o(6);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals),(0,o(9).default)("4b18c3e0",r,!0,{})},function(e,o){e.exports=t},function(t,o){t.exports=e},function(t,e){t.exports=o},function(t,e){t.exports=r},function(t,e,o){"use strict";var r=o(0);o.n(r).a},function(t,e,o){(e=o(7)(!1)).push([t.i,".ec-user{display:inline}.ec-user__popover{max-width:100%;min-width:12rem;font-size:1rem;line-height:1.4}.ec-user__alert{font-size:.85rem;margin-bottom:1rem}.ec-user__logout{margin-top:1rem}.ec-user__btn{color:#fff;text-align:left;line-height:1.2rem;padding:.7rem;min-width:15rem;font-size:.9rem}.ec-user__btn:hover{color:#fff}.ec-user__btn:focus{box-shadow:none}.ec-user__btn--facebook{background:#3b5999;border-color:#2f4d8a}.ec-user__btn--facebook:hover{background:#274480;border-color:#274480}.ec-user__btn--google{background:#cb4023;border-color:#be3419}.ec-user__btn--google:hover{background:#c1361a;border-color:#c1361a}.ec-user__btn--windowslive{background:#329ffc;border-color:#2996f2}.ec-user__btn--windowslive:hover{background:#1f8ce9;border-color:#1f8ce9}.ec-user__btn__icon{display:inline-block;width:1.4rem;text-align:center;margin-right:.2rem}.ec-user__back{display:block;padding-left:.3rem;padding-right:.3rem}.ec-user__back:focus{box-shadow:none}.ec-user__visitor-info{font-size:.875rem;margin-top:.6rem;text-align:center;color:var(--gray)}",""]),t.exports=e},function(t,e,o){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var o=function(t,e){var o,r,n,i=t[1]||"",s=t[3];if(!s)return i;if(e&&"function"==typeof btoa){var a=(o=s,r=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(n," */")),c=s.sources.map((function(t){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(t," */")}));return[i].concat(c).concat([a]).join("\n")}return[i].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(o,"}"):o})).join("")},e.i=function(t,o){"string"==typeof t&&(t=[[null,t,""]]);for(var r=0;r<t.length;r++){var n=[].concat(t[r]);o&&(n[2]?n[2]="".concat(o," and ").concat(n[2]):n[2]=o),e.push(n)}},e}},function(t,e,o){"use strict";o.r(e);var r=o(1),n=o.n(r),i=(o(4),o(2));const s={my_account:{en_us:"My account",pt_br:"Minha conta"},my_orders:{en_us:"My orders",pt_br:"Meus pedidos"},hello:{en_us:"Hello",pt_br:"Olá"},visitor:{en_us:"visitor",pt_br:"visitante"},sign_in_with:{en_us:"Sign in with",pt_br:"Entrar com"},sign_up_with:{en_us:"Sign up with",pt_br:"Cadastrar via"},another:{en_us:"another",pt_br:"outro"},email:{en_us:"email",pt_br:"e-mail"},logout:{en_us:"Logout",pt_br:"Sair"},login:{en_us:"Login",pt_br:"Entrar"},continue_on_popup:{en_us:"Continue login on popup",pt_br:"Continue o login no pop-up"},login_error:{en_us:"There was an error trying to login, please try again or select another option",pt_br:"Houve um erro ao tentar o login, por favor tente novamente ou selecione outra opção"},profile_not_found:{en_us:"No profile found with email address",pt_br:"Nenhum perfil encontrado com o endereço de e-mail"},visitor_checkout:{en_us:"You can also buy as a visitor if you prefer",pt_br:"Você também pode comprar como visitante se preferir"}};var a=function(t,e){return e||(e=this&&this.lang||"en_us"),s[t]&&s[t][e]||""},c=o(3),u=o.n(c),l={name:"EcUser",props:{lang:{type:String,default:i.$ecomConfig.get("lang")},ecomPassport:{type:Object,default:()=>u.a},popoverPlacement:{type:String,default:"bottomleft"},getGreetingsMsg:{type:Function},accountUrl:{type:String,default:"/app/#/account/"},ordersUrl:{type:String,default:"/app/#/account/orders"},popupAlertCountSecs:{type:Number,default:3}},data:()=>({showPopover:!1,popoverTriggers:"click blur",waiting:!1,waitingPopup:!1,isLogged:!1,email:"",name:"",oauthProviders:[],showLoginForm:!1,popupAlertCount:0,loginErrorAlert:!1,noProfileFound:!1,popoverHideTimer:null}),computed:{greetings(){return"function"==typeof this.getGreetingsMsg?this.getGreetingsMsg(this.name):`${a("hello",this.lang)} ${this.name||a("visitor",this.lang)}`}},methods:{dictionary:a,update(){this.fixPopoverTriggers();const{checkLogin:t,getCustomerName:e}=this.ecomPassport;this.name=e(),this.isLogged=t(),this.email="",this.popupAlertCount=0,this.isLogged&&(this.showPopover=!0,setTimeout(()=>{this.showPopover&&(this.popoverHideTimer=setTimeout(()=>{this.showPopover=!1},2e3))},200)),this.waitingPopup=!1,clearTimeout(this.popoverHideTimer)},waitPromise(t){this.fixPopoverTriggers();const e=this;e.waiting=!0,t.catch(t=>{console.error(t)}).finally(()=>{e.waiting=!1})},setOauthProviders(){const t=this,e=t.ecomPassport.fetchOauthProviders().then(({host:e,baseUri:o,oauthPath:r,providers:n})=>{const i=[];for(const t in n)if(n[t]){const{faIcon:s,providerName:a}=n[t];i.push({link:e+o+t+r,faIcon:s,provider:t,providerName:a})}t.oauthProviders=i}).catch(e=>{throw t.presetOauthProviders(),e});return t.waitPromise(e),e},presetOauthProviders(){this.oauthProviders=[{faIcon:"fa-facebook-f",providerName:"Facebook",provider:"facebook"},{faIcon:"fa-google",providerName:"Google",provider:"google"},{faIcon:"fa-windows",providerName:"Windows",provider:"windowslive"}]},oauthPopup(t,e){const o=this;if(this.loginErrorAlert=!1,t)o.ecomPassport.popupOauthLink(t),o.waitingPopup=!0,setTimeout(()=>{o.popupAlertCount=o.popupAlertCountSecs},200);else{const t=o.setOauthProviders().then(()=>{const t=o.oauthProviders.find(t=>t.provider===e);o.oauthPopup(t,e)}).catch(t=>{throw o.loginErrorAlert=!0,t});o.waitPromise(t)}},popupAlertChanged(t){this.popupAlertCount=t},emailLoginSubmit(t){const e=this;t.preventDefault(),e.showLoginForm=!1;const o=e.ecomPassport.fetchLogin(this.email).catch(t=>{const{response:o}=t;if(!o||403!==o.status)throw setTimeout(()=>{e.loginErrorAlert=!0},100),t;e.noProfileFound=!0});e.waitPromise(o)},logout(){this.ecomPassport.logout()},resetErrors(){this.noProfileFound=this.loginErrorAlert=!1},resetPopover(){this.showLoginForm?this.showLoginForm=!1:this.resetErrors()},fixPopoverTriggers(){this.showPopover&&(this.popoverTriggers="manual",setTimeout(()=>{this.popoverTriggers="click blur"},310))}},mounted(){const t=this;["login","logout"].forEach(e=>{this.ecomPassport.on(e,o=>{t.update(),t.$emit(e,o)})}),t.update(),t.setOauthProviders()},watch:{noProfileFound(t){!1===t&&(this.email=""),this.showLoginForm=!t},showLoginForm(t){this.loginErrorAlert=!1,t&&(this.fixPopoverTriggers(),setTimeout(()=>{this.$refs.input&&this.$refs.input.focus()},300))},showPopover(){clearTimeout(this.popoverHideTimer)}}};o(5);var p=function(t,e,o,r,n,i,s,a){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=o,u._compiled=!0),r&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),s?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},u._ssrRegister=c):n&&(c=a?function(){n.call(this,this.$root.$options.shadowRoot)}:n),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,e){return c.call(e),l(t,e)}}else{var p=u.beforeCreate;u.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:u}}(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"ec-user"},[t._t("button",[o("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"btn btn-lg btn-light",attrs:{type:"button",id:"ec-user-popover",title:t.dictionary("my_account")}},[o("i",{staticClass:"fas fa-user"})])]),o("b-popover",{attrs:{target:"ec-user-popover",triggers:t.popoverTriggers,show:t.showPopover,placement:t.popoverPlacement},on:{"update:show":function(e){t.showPopover=e},hidden:t.resetPopover}},[o("template",{slot:"title"},[t._v(" "+t._s(t.greetings)+" ")]),o("div",{staticClass:"ec-user__popover"},[o("b-alert",{staticClass:"ec-user__alert",attrs:{show:t.loginErrorAlert,fade:"",variant:"warning"}},[t._v(" "+t._s(t.dictionary("login_error"))+". ")]),o("transition-group",{attrs:{"enter-active-class":"animated fadeIn","leave-active-class":"animated position-absolute fadeOut faster"}},[t.waiting?o("div",{key:"waiting"},[o("div",{staticClass:"spinner-border m-3",attrs:{role:"status"}},[o("span",{staticClass:"sr-only"},[t._v("Loading...")])])]):t.isLogged?o("div",{key:"logged"},[o("div",{staticClass:"list-group list-group-flush"},[o("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:t.ordersUrl}},[t._v(" "+t._s(t.dictionary("my_orders"))+" ")]),o("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:t.accountUrl}},[t._v(" "+t._s(t.dictionary("my_account"))+" ")])]),o("button",{staticClass:"btn btn-block btn-danger ec-user__logout",attrs:{type:"button"},on:{click:t.logout}},[o("i",{staticClass:"fas fa-sign-out-alt"}),t._v(" "+t._s(t.dictionary("logout"))+" ")])]):t.showLoginForm?o("div",{key:"form"},[o("form",{on:{submit:t.emailLoginSubmit}},[o("div",{staticClass:"form-group"},[o("button",{staticClass:"btn ec-user__back",attrs:{type:"button"},on:{click:function(e){t.showLoginForm=!1}}},[o("i",{staticClass:"fas fa-arrow-left"})]),o("label",{attrs:{for:"ec-user-email"}},[t._v(" "+t._s(t.dictionary("sign_in_with")+" "+t.dictionary("email"))+" ")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],ref:"input",staticClass:"form-control",attrs:{type:"email",id:"ec-user-email",placeholder:"email@mail.com",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),o("button",{staticClass:"btn btn-block btn-primary",attrs:{type:"submit"}},[t._v(" "+t._s(t.dictionary("login"))+" ")])])]):o("div",{key:"oauth"},[o("b-alert",{staticClass:"ec-user__alert",attrs:{show:!t.popupAlertCount&&t.noProfileFound,fade:"",variant:"info"}},[t._v(" "+t._s(t.dictionary("profile_not_found"))+" "),o("b",[t._v(t._s(t.email))]),t._v(". "),o("br"),o("a",{staticClass:"alert-link",attrs:{href:"javascript:;"},on:{click:function(e){t.noProfileFound=!1}}},[t._v(" "+t._s(t.dictionary("sign_in_with")+" "+t.dictionary("another")+" "+t.dictionary("email"))+" ")])]),o("b-alert",{staticClass:"ec-user__alert",attrs:{show:t.popupAlertCount,dismissible:"",fade:"",variant:"info"},on:{dismissed:function(e){t.popupAlertCount=0},"dismiss-count-down":t.popupAlertChanged}},[t._v(" "+t._s(t.dictionary("continue_on_popup"))+". ")]),t._l(t.oauthProviders,(function(e){var r=e.link,n=e.faIcon,i=e.providerName,s=e.provider;return o("button",{key:s,staticClass:"btn btn-block ec-user__btn",class:"ec-user__btn--"+s,attrs:{type:"button"},on:{click:function(){return t.oauthPopup(r,s)}}},[o("span",{staticClass:"ec-user__btn__icon"},[o("i",{staticClass:"fab",class:n})]),t._v(" "+t._s(t.dictionary(t.noProfileFound?"sign_up_with":"sign_in_with"))+" "+t._s(i)+" ")])})),t.noProfileFound?o("div",{staticClass:"ec-user__visitor-info"},[t._v(" "+t._s(t.dictionary("visitor_checkout"))+" ")]):o("button",{key:"email",staticClass:"btn btn-block btn-secondary ec-user__btn",attrs:{type:"button"},on:{click:function(e){t.showLoginForm=!0}}},[o("span",{staticClass:"ec-user__btn__icon"},[o("i",{staticClass:"fas fa-envelope"})]),t._v(" "+t._s(t.dictionary("sign_in_with")+" "+t.dictionary("email"))+" ")])],2)])],1)],2)],2)}),[],!1,null,null,null).exports;e.default=(t={},e="user-button")=>{const o=document.getElementById(e);o&&new n.a({render:o=>o(p,{attrs:{id:e},props:{...t.props}})}).$mount(o)}},function(t,e,o){"use strict";function r(t,e){for(var o=[],r={},n=0;n<e.length;n++){var i=e[n],s=i[0],a={id:t+":"+n,css:i[1],media:i[2],sourceMap:i[3]};r[s]?r[s].parts.push(a):o.push(r[s]={id:s,parts:[a]})}return o}o.r(e),o.d(e,"default",(function(){return f}));var n="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!n)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},s=n&&(document.head||document.getElementsByTagName("head")[0]),a=null,c=0,u=!1,l=function(){},p=null,d="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(t,e,o,n){u=o,p=n||{};var s=r(t,e);return h(s),function(e){for(var o=[],n=0;n<s.length;n++){var a=s[n];(c=i[a.id]).refs--,o.push(c)}for(e?h(s=r(t,e)):s=[],n=0;n<o.length;n++){var c;if(0===(c=o[n]).refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete i[c.id]}}}}function h(t){for(var e=0;e<t.length;e++){var o=t[e],r=i[o.id];if(r){r.refs++;for(var n=0;n<r.parts.length;n++)r.parts[n](o.parts[n]);for(;n<o.parts.length;n++)r.parts.push(m(o.parts[n]));r.parts.length>o.parts.length&&(r.parts.length=o.parts.length)}else{var s=[];for(n=0;n<o.parts.length;n++)s.push(m(o.parts[n]));i[o.id]={id:o.id,refs:1,parts:s}}}}function g(){var t=document.createElement("style");return t.type="text/css",s.appendChild(t),t}function m(t){var e,o,r=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(r){if(u)return l;r.parentNode.removeChild(r)}if(d){var n=c++;r=a||(a=g()),e=b.bind(null,r,n,!1),o=b.bind(null,r,n,!0)}else r=g(),e=y.bind(null,r),o=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else o()}}var v,_=(v=[],function(t,e){return v[t]=e,v.filter(Boolean).join("\n")});function b(t,e,o,r){var n=o?"":r.css;if(t.styleSheet)t.styleSheet.cssText=_(e,n);else{var i=document.createTextNode(n),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}function y(t,e){var o=e.css,r=e.media,n=e.sourceMap;if(r&&t.setAttribute("media",r),p.ssrId&&t.setAttribute("data-vue-ssr-id",e.id),n&&(o+="\n/*# sourceURL="+n.sources[0]+" */",o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}}]).default},t.exports=r(o(70),o(4),o(163),o(162))}}]);
//# sourceMappingURL=5ba74a501acc45811977.js.map