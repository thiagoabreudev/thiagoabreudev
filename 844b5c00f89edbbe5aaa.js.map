{"version":3,"sources":["webpack:///./node_modules/@ecomplus/widget-trustvox/src/lib/observer.js","webpack:///./node_modules/@ecomplus/widget-trustvox/src/lib/rating-widget.js","webpack:///./node_modules/@ecomplus/widget-trustvox/src/index.js","webpack:///./node_modules/@ecomplus/widget-trustvox/src/lib/rating-products.js","webpack:///./node_modules/@ecomplus/widget-trustvox/src/lib/rating-search.js","webpack:///./node_modules/@ecomplus/widget-trustvox/src/lib/comments-products.js"],"names":["window","MutationObserver","callback","observe","el","childList","attributes","characterData","subtree","attributeOldValue","characterDataOldValue","productId","$div","document","createElement","setAttribute","options","trustvoxStoreId","forEach","script","scriptEl","src","body","appendChild","$productCards","getElementsByClassName","skus","$ratingsBySku","i","length","$productCard","dataset","sku","indexOf","$rating","style","display","push","$shelf","parentElement","observer","childNodes","toRender","$productCardLink","querySelectorAll","j","_trustvox_shelf_rate","$search","getElementById","$productBlock","context","_context","moConfig","$ratingProduct","$link","className","id","href","title","$shelfContainer","$ratingClickHere","ratingLink","widgetIsRended","mo","$shelfProduct","$productBlockNode","$productName","parentNode","insertBefore","nextSibling","pictures","picture","normal","url","_trustvox","name","$trustvoxWidget","interval","setInterval","disconnect","clearInterval","console","error","Error"],"mappings":"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","file":"844b5c00f89edbbe5aaa.js","sourcesContent":["export default (el, callback) => {\n  const config = {\n    childList: false,\n    attributes: true,\n    characterData: true,\n    subtree: true,\n    attributeOldValue: true,\n    characterDataOldValue: true\n  }\n  const observer = new window.MutationObserver(callback)\n  observer.observe(el, config)\n}\n","export default productId => {\n  const $div = document.createElement('div')\n  $div.setAttribute('data-trustvox-product-code', productId)\n  return $div\n}\n","import ratingCards from './lib/rating-products'\nimport commentsProduct from './lib/comments-products'\nimport ratingSearch from './lib/rating-search'\n\nexport default options => {\n  if (options && options.trustvoxStoreId) {\n    ;[\n      '//static.trustvox.com.br/assets/widget.js',\n      '//s3-sa-east-1.amazonaws.com/trustvox-rate-widget-js/widget.js'\n    ].forEach(script => {\n      const scriptEl = document.createElement('script')\n      scriptEl.src = script\n      document.body.appendChild(scriptEl)\n    })\n\n    ratingCards(options)\n    ratingSearch(options)\n    commentsProduct(options)\n  } else {\n    console.error(new Error('Can\\'t setup Trustvox widget without `trustvoxStoreId` option'))\n  }\n}\n","import observer from './observer'\nimport newRatingWidget from './rating-widget'\n\nexport default options => {\n  const elClass = 'product-card'\n  const $productCards = document.getElementsByClassName(elClass)\n\n  if ($productCards) {\n    const skus = []\n    const $ratingsBySku = {}\n\n    for (let i = 0; i < $productCards.length; i++) {\n      const $productCard = $productCards[i]\n      if ($productCard && $productCard.dataset) {\n        const { sku } = $productCard.dataset\n        if (skus.indexOf(sku) === -1) {\n          const $rating = newRatingWidget(sku)\n          $rating.style.display = 'none'\n          skus.push(sku)\n          $ratingsBySku[sku] = $rating\n          document.body.appendChild($rating)\n        }\n\n        const $shelf = $productCard.parentElement\n        observer($shelf, () => {\n          for (let i = 0; i < $shelf.childNodes.length; i++) {\n            const $productCard = $shelf.childNodes[i]\n            const { sku, toRender } = $productCard.dataset\n            if (!toRender) {\n              if (skus.indexOf(sku) > -1) {\n                const $rating = $ratingsBySku[sku]\n                const $productCardLink = document.querySelectorAll(`[data-sku=\"${sku}\"] .ec-product-card__link`)\n                if ($productCardLink.length) {\n                  for (let j = 0; j < $productCardLink.length; j++) {\n                    $productCardLink[j].appendChild($rating)\n                  }\n                  $rating.style.display = 'inherit'\n                }\n              }\n            }\n          }\n        })\n      }\n    }\n\n    window._trustvox_shelf_rate = window._trustvox_shelf_rate || []\n    window._trustvox_shelf_rate.push(['_storeId', options.trustvoxStoreId])\n  }\n}\n","import observer from './observer'\nimport newRatingWidget from './rating-widget'\n\nexport default () => {\n  const $search = document.getElementById('search')\n\n  if ($search) {\n    observer($search, () => {\n      const $productCards = document.querySelectorAll('#search-engine .product-card')\n\n      for (let i = 0; i < $productCards.length; i++) {\n        const $productCard = $productCards[i]\n        const { sku } = $productCard.dataset\n        const $productCardLink = document.querySelectorAll(`[data-sku=\"${sku}\"] .ec-product-card__link`)\n\n        if ($productCardLink.length) {\n          const $rating = newRatingWidget(sku)\n          for (let j = 0; j < $productCardLink.length; j++) {\n            $productCardLink[j].appendChild($rating)\n          }\n        }\n      }\n\n      window._trustvox_shelf_rate.push(['_productContainer', '#search'])\n    })\n  }\n}\n","export default options => {\n  const $productBlock = document.getElementById('product')\n  const context = window._context.body\n\n  const moConfig = {\n    childList: false,\n    attributes: true,\n    characterData: true,\n    subtree: true,\n    attributeOldValue: true,\n    characterDataOldValue: true\n  }\n\n  if ($productBlock) {\n    const ratingLink = () => {\n      const $link = document.createElement('a')\n      $link.className = 'trustvox-fluid-jump trustvox-widget-rating product-widget-rating'\n      $link.id = 'trustvox-widget-rating'\n      $link.href = '#_trustvox_widget'\n      $link.title = 'Veja as opini√µes de quem comprou esse produto!'\n\n      const $shelfContainer = document.createElement('div')\n      $shelfContainer.className = 'trustvox-shelf-container'\n      $shelfContainer.setAttribute('data-trustvox-product-code', context.sku)\n      $link.appendChild($shelfContainer)\n\n      const $ratingClickHere = document.createElement('span')\n      $ratingClickHere.className = 'rating-click-here'\n      $link.appendChild($ratingClickHere)\n\n      return $link\n    }\n\n    const $ratingProduct = ratingLink()\n    $ratingProduct.style.display = 'none'\n    document.body.appendChild($ratingProduct)\n    let widgetIsRended = false\n\n    let mo = null\n    const $shelfProduct = $productBlock.parentElement\n    for (let i = 0; i < $shelfProduct.childNodes.length; i++) {\n      if ($shelfProduct.childNodes[i].id === 'product') {\n        const callback = () => {\n          for (let j = 0; j < $shelfProduct.childNodes[i].childNodes.length; j++) {\n            const $productBlockNode = $shelfProduct.childNodes[i].childNodes[j]\n            if ($productBlockNode.id === 'product-block') {\n              const { toRender } = $productBlockNode.dataset\n              if (!toRender) {\n                const $productName = document.getElementsByClassName('ec-product__name')[0]\n                if (!widgetIsRended && typeof $productName !== 'undefined') {\n                  $productName.parentNode.insertBefore($ratingProduct, $productName.nextSibling)\n                  $ratingProduct.style.display = 'inherit'\n                  widgetIsRended = true\n                }\n              }\n            }\n          }\n        }\n        mo = new window.MutationObserver(callback)\n        mo.observe($shelfProduct.childNodes[i], moConfig)\n      }\n    }\n\n    const pictures = []\n    context.pictures.forEach(picture => {\n      if (picture.normal) {\n        pictures.push(picture.normal.url)\n      }\n    })\n\n    window._trustvox = window._trustvox || []\n    window._trustvox.push(['_storeId', options.trustvoxStoreId])\n    window._trustvox.push(['_productId', context.sku])\n    window._trustvox.push(['_productName', context.name])\n    window._trustvox.push(['_productPhotos', pictures])\n\n    const $trustvoxWidget = document.createElement('div')\n    $trustvoxWidget.id = '_trustvox_widget'\n    document.getElementById('product').appendChild($trustvoxWidget)\n\n    const interval = setInterval(() => {\n      if (widgetIsRended) {\n        mo.disconnect()\n        clearInterval(interval)\n      }\n    }, 1000)\n  }\n}\n"],"sourceRoot":""}